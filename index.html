<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <title>Toufiq Elahy - Course</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
      integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
      crossorigin="anonymous"
    />

    <style>
      body {
        padding-top: 80px;
      }

      .show-cart li {
        display: flex;
      }

      .card {
        margin-bottom: 20px;
        border-width: 0;
      }

      .card-img-top {
        width: 200px;
        height: 200px;
        align-self: center;
      }

      .hide {
display: none;
      }
    </style>
  </head>

  <body translate="no" class="">
    <!-- Nav -->
    <nav class="navbar navbar-inverse bg-inverse fixed-top bg-faded"></nav>

    <!-- Main -->
    <div class="container">
      <div class="row">
        <div id="blockchain" class="col hide">
          <div class="card">
            <img
              class="img-thumbnail"
              src="https://udemydownload.com/wp-content/uploads/2019/03/1-Complete-Blockchain-Cryptocurrency-Wallet-Development-Udemy-Free-Download.jpg"
              alt="Card image cap"
            />
            <div class="card-block">
              <h4 class="card-title">
                #1 Complete Blockchain, Cryptocurrency, Wallet Development
              </h4>
              <p class="card-text">Price: $999</p>
              <h6>
                Pay 999 USDT :
                <br /><text class="admin">0xcc9cd56fe33395c92f05041cd6a1296b43c67daf</text> (ERC20)<br />to
                get Entire Course Content
              </h6>
            </div>
          </div>
        </div>
        <div id="plugin" class="col hide">
          <div class="card">
            <img
              class="img-thumbnail"
              src="https://freecourseudemy.com/wp-content/uploads/2019/02/1-Complete-ASP.NET-Core-2.0-MVC-Single-Page-AppThe-FUTURE.jpg"
              alt="Card image cap"
            />
            <div class="card-block">
              <h4 class="card-title">
                Single Page Application [WITHIN 2 MINUTE] Using toufiqElahySPA.js Plugin
              </h4>
              <p class="card-text">Price: $999</p>
              <h6>
                Pay 999 USDT :
                <br /><text class="admin">0xcc9cd56fe33395c92f05041cd6a1296b43c67daf</text> (ERC20)<br />to
                get Entire Course Content
              </h6>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card" style="width: 18rem">
            <div class="text-right" id="qrcode"></div>
            <div class="card-body">
              <p class="card-text">
                <h6>Scan QR Code To Pay:-</h6> ethereum:<text class="admin">0xcc9cd56fe33395c92f05041cd6a1296b43c67daf</text>?amount=999
              </p>
              <br>
              <div class="card-block"><a target="_blank" href="https://m.me/toufiq.elahy">Click To Chat on Facebook</a><br> <a target="_blank" href="https://join.skype.com/invite/eOVUOWP4vBVB">Click To Chat on Skype</a><br><a href="mailto:toufiqelahy@hotmail.com">Click To Chat on Email</a> </div>
              <b>Chat With Author to Buy with Other Currency like:[Bitcoin, Ethereum or other coin e.t.c]</b>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <script src="https://smtpjs.com/v3/smtp.js"></script>

    <script type="text/javascript">
      //tether contract: 0xdAC17F958D2ee523a2206206994597C13D831ec7
      function sendEmail() {
        Email.send({
          Host: "smtp.gmail.com",
          Username: "sender@email_address.com",
          Password: "Enter your password",
          To: "receiver@email_address.com",
          From: "sender@email_address.com",
          Subject: "Sending Email using javascript",
          Body: "Well that was easy!!",
        }).then(function (message) {
          alert("mail sent successfully");
        });
      }
    </script>

    <script src="abi.js"></script>

    <script src="ethers/dist/ethers.js"></script>
    <script src="Scripts/qrcode.js"></script>

    <script>
$(function(){
  const urlParams = new URLSearchParams(window.location.search);
const myParam = urlParams.get('query');
if(myParam=='blockchain'){
  $('#blockchain').removeClass('hide');
}else{
  $('#plugin').removeClass('hide');
}
})

        var admin = "0xcc9cd56fe33395c92f05041cd6a1296b43c67daf";
      var coinPriceUSD = 0;
      var ttal = 0;
      var add = 0;

      add =
        Math.random() * (0.000000000000000001 - 0.000099999999999999) +
        0.000000000000000001;
        console.log(add);
      ttal = ttal + add;
      $("#amntt").html(ttal);
      console.log(ttal);
      new QRCode(
        document.getElementById("qrcode"),
        "ethereum:"+admin+"?amount=" + ttal
      );

      let provider = ethers.getDefaultProvider("ropsten");
      let contract = new ethers.Contract(ContractAddress, abi, provider);
      //filter
      
      let filter = contract.filters.Transfer(null, admin);
      // Listen for our filtered results
      ttal = ttal * 10 ** 6; //6 decimal
      console.log(ttal);
      ttal = ttal.toString().slice(0, -4);
      console.log(ttal);
      contract.on(filter, (from, to, value) => {
        value = value.toString().slice(0, -4);
        if (value.includes(ttal)) {
          alert(
            "Congratulation...! Your payment is done.. Already received " +
              value / 10 ** 6 +
              " ELA Coin from this Address:" +
              from
          );
          $(".header-menu").remove();
          //alert('Payment received: ' + value / 10 ** 18 + ' tokens from ' + from);
          ////////
        }
        console.log(ttal + " Payment received: " + value);
      });
    </script>
  </body>
</html>
